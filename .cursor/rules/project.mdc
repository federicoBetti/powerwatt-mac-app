# Project rules (PowerWatt)

## Website / GitHub Pages sync

- When shipping a **user-facing feature** (new behavior, setting, UI option, menu item, update mechanism, privacy/telemetry change), update the public download site.
- The download site lives in `docs/`:
  - `docs/index.html`: update the **Features** section (`#features`) to include the new feature (or adjust wording if behavior changed).
  - `docs/privacy.html`: update if the change impacts telemetry, consent, data collected, or hosting.
- Do not promise features the app does not have (keep wording accurate to the current code).
- Prefer adding features as new cards/bullets rather than rewriting existing ones, unless the old text became incorrect.

## Releases

- If a change is mentioned in release notes or README "Features", ensure the website's feature list remains consistent.
- The release workflow publishes end-user artifacts (`.dmg`, `.pkg`, `.zip`). Keep `docs/index.html` download/install instructions aligned with what's shipped.

## Project Structure

The project follows this organization:

- `PowerWatt/Models/` - Data models (TotalPowerSample, ProcessMetricsSample, EnergyImpactSample, AppPowerSample)
- `PowerWatt/Services/` - Business logic services (TotalPowerService, ProcessMetricsService, EnergyImpactService, PowerAttributionService, UsageManager)
- `PowerWatt/Storage/` - Data persistence (UsageStore, MinuteBucketAggregator)
- `PowerWatt/UI/Usage/` - Usage tracking UI (UsageView, UsageViewModel, AppDetailView)
- `PowerWatt/UI/Usage/Charts/` - Chart components (TotalPowerChart, AppStackedEnergyChart)
- `Info.plist` - App Info.plist (kept at repo root to avoid being copied as a resource)

## Usage Feature Documentation

- `docs/USAGE_FEATURE.md` - Technical documentation for the Usage feature
- `docs/VALIDATION.md` - Validation guide comparing with Activity Monitor

